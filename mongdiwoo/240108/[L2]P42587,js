// P42587 : 프로세스
// 아래 규칙에 따라 프로세스를 관리할 경우, 특정 프로세스가 몇 번쨰로 실행되는지 알아내기
// 규칙 1) 실행 대기 큐에서 대기중인 프로세스 하나를 꺼냅니다.
// 규칙 2) 큐에 대기중인 프로세스 중 우선순위가 더 높은 프로세스가 있다면 방금 꺼낸 프로세스를 다시 큐에 넣습니다.
// 규칙 3) 만약 그런 프로세스가 없다면 방금 꺼낸 프로세스를 실행합니다.
// 규칙 3.1) 한 번 실행한 프로세스는 다시 큐에 넣지 않고 그대로 종료됩니다.

// priorities : 실행 대기 큐에 있는 프로세스의 중요도가 순서대로 담긴 배열 (높을 수록 빨리 실행해야 함)
// location : 몇 번쨰로 실행되는지 알고싶은 프로세스의 위치를 알려주는 매개변수
// => 그렇다면 해당 프로세스가 몇 번쨰로 실행되는지?

// #3. 최대값
function solution(priorities, location) {
    var answer = 0;

    // 인덱스 배열
    const index_array = [];
    for (let i = 0; i < priorities.length; i++) {
        index_array.push(i);
    }

    let max = Math.max(...priorities);
    let max_index = 0;
    while (priorities.length > 0) {
        answer++;

        max = Math.max(...priorities);
        max_index = priorities.indexOf(max, max_index);
        if (max_index == -1) max_index = priorities.indexOf(max);

        if (index_array[max_index] == location) break;

        priorities.splice(max_index, 1);
        index_array.splice(max_index, 1);
    }

    return answer;
}
